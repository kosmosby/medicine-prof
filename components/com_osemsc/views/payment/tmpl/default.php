<?php/**  * @version     5.0 +  * @package        Open Source Membership Control - com_osemsc  * @subpackage    Open Source Access Control - com_osemsc  * @author        Open Source Excellence (R) {@link  http://www.opensource-excellence.com}  * @author        Created on 15-Nov-2010  * @license GNU/GPL http://www.gnu.org/copyleft/gpl.html  *  *  *  This program is free software: you can redistribute it and/or modify  *  it under the terms of the GNU General Public License as published by  *  the Free Software Foundation, either version 3 of the License, or  *  (at your option) any later version.  *  *  This program is distributed in the hope that it will be useful,  *  but WITHOUT ANY WARRANTY; without even the implied warranty of  *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  *  GNU General Public License for more details.  *  *  You should have received a copy of the GNU General Public License  *  along with this program.  If not, see <http://www.gnu.org/licenses/>.  *  @Copyright Copyright (C) 2010- Open Source Excellence (R)*/
defined('_JEXEC') or die("Direct Access Not Allowed");oseHTML::script(oseMscMethods::getJsModPath('payment','payment'),'1.5');?><div id="ose-payment"></div><script type="text/javascript">
Ext.onReady(function(){	Ext.QuickTips.init();	oseMsc.payment.panel.render('ose-payment');	var getMembership = function(msc_id,type){		if(type == 'm')	{			var ptask =  'getMembershipManual';		}	else	{			var ptask =  'getMembershipAuto';		}		oseMsc.payment.paymethods.form.getComponent('payment_mode').setValue(type);		oseMsc.payment.paymethods.form.getComponent('msc_id').setValue(msc_id);		Ext.Ajax.request({			url: 'index.php?option=com_osemsc&controller=payment',			params:{task: ptask , 'msc_id': msc_id},			success: function(response,opt){				var content = Ext.decode(response.responseText);				oseMsc.payment.msc_id = content.id;				//oseMsc.payment.price = content.price;				oseMsc.payment.payment_mode = type;				var tpl = new Ext.Template(					'<table>',                    '<tr><td>Name:</td><td> {title}</td></tr>',                    '<tr><td>Period: </td><td>{period}</td></tr>',                    '<tr><td>Discount: </td><td>{discount} %</td></tr>',                    '<tr><td>Price: </td><td>{price}</td></tr>',                    '</table>'                );                tpl.overwrite(oseMsc.payment.panel.getComponent('ose-payment-info').body, content.membership);			},		});	}	oseMsc.payment.grid.getTopToolbar().select_a.on('click',function(){		var node = oseMsc.payment.grid.getSelectionModel().getSelected();		getMembership.createDelegate(this, [node.id,'a'])();	});	oseMsc.payment.grid.getTopToolbar().select_m.on('click',function(){		var node = oseMsc.payment.grid.getSelectionModel().getSelected();		oseMsc.payment.paymethods.form.getComponent('msc_id').setValue(node.id);		oseMsc.payment.paymethods.form.getComponent('payment_mode').setValue('m');		getMembership.createDelegate(this, [node.id,'m'])();	});	var pay_msc_id = <?php echo $this->pay_msc_id;?>;	if(pay_msc_id > 0)	{		oseMsc.payment.paymethods.form.getComponent('msc_id').setValue(pay_msc_id);		getMembership.createDelegate(this, [pay_msc_id,'m'])();	}	//oseMsc.payment.paymethods.form.paymethods});
</script>
<div id="test"></div>