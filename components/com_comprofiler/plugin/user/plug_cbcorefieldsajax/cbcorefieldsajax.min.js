!function(e){var a=[],n={init:function(n){return this.each(function(){var i=this,t=e(i).data("cbajaxfield");t||(t={},t.options=n,t.defaults=e.fn.cbajaxfield.defaults,t.settings=e.extend(!0,{},t.defaults,t.options),t.element=e(i),t.settings.useData&&e.each(t.defaults,function(e){if("init"!=e&&"useData"!=e){var a=t.element.data("cbajaxfield"+e.charAt(0).toUpperCase()+e.slice(1));"undefined"!=typeof a?t.settings[e]=a:(a=t.element.data("cbajaxfield"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()),"undefined"!=typeof a&&(t.settings[e]=a))}}),t.element.trigger("cbajaxfield.init.before",[t]),t.settings.init&&(t.element.children(".cbAjaxForm").ajaxForm({target:t.element.children(".cbAjaxValue"),type:"POST",beforeSerialize:function(e,a){t.element.trigger("cbajaxfield.serialize",[t,e,a])},beforeSubmit:function(e,a,n){var i=t.element.children(".cbAjaxForm").data("cbvalidate");return i&&!i.element.cbvalidate("validate")?!1:(t.element.children(".cbAjaxForm").addClass("hidden"),t.element.append('<span class="cbSpinner fa fa-spinner fa-spin-fast"></span>'),void t.element.trigger("cbajaxfield.submit",[t,e,a,n]))},error:function(e,a,n){t.element.trigger("cbajaxfield.error",[t,e,a,n])},success:function(e,a,n){t.element.trigger("cbajaxfield.success",[t,e,a,n])},complete:function(e,a,n){t.element.children(".cbAjaxValue").removeClass("hidden"),t.element.children(".cbSpinner").remove(),t.element.trigger("cbajaxfield.done",[t,e,a,n])}}),t.cancelHandler=function(e){t.element.children(".cbAjaxForm").addClass("hidden"),t.element.children(".cbAjaxValue").removeClass("hidden"),t.element.trigger("cbajaxfield.cancel",[t,e])},t.element.on("click",".cbAjaxCancel",t.cancelHandler),t.editHandler=function(a){e(a.target).is("a")||(t.element.children(".cbAjaxValue").addClass("hidden"),t.element.children(".cbAjaxForm").removeClass("hidden")),t.element.trigger("cbajaxfield.edit",[t,a])},t.element.on("click",".cbAjaxValue",t.editHandler),t.element.on("modified.cbajaxfield",function(e,a,n,i){n!=i&&(t.element.cbajaxfield("destroy"),t.element.cbajaxfield(t.options))}),t.element.on("cloned.cbajaxfield",function(){e(this).off("cloned.cbajaxfield"),e(this).off("modified.cbajaxfield"),e(this).removeData("cbajaxfield"),e(this).children(".cbAjaxForm").addClass("hidden"),e(this).children(".cbAjaxValue").removeClass("hidden"),e(this).children(".cbSpinner").remove(),e(this).off("click",".cbAjaxCancel",t.cancelHandler),e(this).off("click",".cbAjaxValue",t.editHandler),e(this).children(".cbAjaxForm").ajaxFormUnbind(),e(this).cbajaxfield(t.options)}),t.element.trigger("cbajaxfield.init.after",[t]),t.element.data("cbajaxfield",t),a.push(t)))})},destroy:function(){var n=e(this).data("cbajaxfield");return n?(n.element.children(".cbAjaxForm").ajaxFormUnbind(),n.element.off("cloned.cbajaxfield"),n.element.off("modified.cbajaxfield"),e.each(a,function(e,i){return i.element==n.element?(a.splice(e,1),!1):!0}),n.element.children(".cbAjaxForm").addClass("hidden"),n.element.children(".cbAjaxValue").removeClass("hidden"),n.element.children(".cbSpinner").remove(),n.element.off("click",".cbAjaxCancel",n.cancelHandler),n.element.off("click",".cbAjaxValue",n.editHandler),n.element.removeData("cbajaxfield"),n.element.trigger("cbajaxfield.destroyed",[n]),!0):!1},instances:function(){return a}};e.fn.cbajaxfield=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:n.init.apply(this,arguments)},e.fn.cbajaxfield.defaults={init:!0,useData:!1}}(jQuery);